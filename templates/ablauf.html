{% extends "base.html" %}

{% block title %}So arbeiten wir | Schulzke Bau- & Industriemontagen{% endblock %}

{% block description %}Erfahren Sie mehr über unseren Arbeitsprozess - Von der ersten Anfrage bis zur erfolgreichen Projektübergabe.{% endblock %}

{% block extra_css %}
<style>
    /* Timeline styles */
    .timeline-line {
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(180deg,
            transparent 0%,
            rgba(232, 90, 30, 0.3) 10%,
            rgba(232, 90, 30, 0.5) 50%,
            rgba(232, 90, 30, 0.3) 90%,
            transparent 100%
        );
        transform: translateX(-50%);
    }

    .timeline-line-progress {
        position: absolute;
        left: 50%;
        top: 0;
        width: 2px;
        height: 0%;
        background: linear-gradient(180deg, #E85A1E, #F5A623);
        transform: translateX(-50%);
        transition: height 0.3s ease;
    }

    @media (max-width: 768px) {
        .timeline-line,
        .timeline-line-progress {
            left: 24px;
        }
    }

    /* Timeline step pulse */
    .timeline-step-pulse {
        position: absolute;
        inset: -8px;
        border-radius: 50%;
        background: rgba(232, 90, 30, 0.3);
        animation: pulse-ring 2s ease-out infinite;
    }

    @keyframes pulse-ring {
        0% { transform: scale(1); opacity: 0.3; }
        100% { transform: scale(1.5); opacity: 0; }
    }

    /* Step active state */
    .timeline-step.active .timeline-step-number {
        background: linear-gradient(135deg, #E85A1E, #F5A623);
        box-shadow: 0 0 40px rgba(232, 90, 30, 0.5);
    }

    .timeline-step.active .timeline-step-content {
        border-color: rgba(232, 90, 30, 0.3);
    }

    /* Icon rotation on hover */
    .step-icon {
        transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .timeline-step:hover .step-icon {
        transform: rotate(15deg) scale(1.1);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative pt-32 pb-20 bg-dark-900 overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0">
        <img src="{{ url_for('static', filename='images/Bau_Geländer_Bild.jpg') }}"
             alt="Fassadengerüst - Schulzke Bau"
             class="w-full h-full object-cover opacity-20"
             style="filter: brightness(0.5);">
    </div>
    <div class="absolute inset-0 bg-gradient-to-b from-dark-900/50 via-dark-900/70 to-dark-900"></div>

    <!-- Glow orbs -->
    <div class="absolute top-20 -right-40 w-96 h-96 bg-primary-500 rounded-full filter blur-[150px] opacity-10"></div>
    <div class="absolute bottom-0 -left-40 w-80 h-80 bg-accent-500 rounded-full filter blur-[120px] opacity-10"></div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="max-w-4xl mx-auto text-center">
            <!-- Badge -->
            <div class="inline-flex items-center gap-2 px-5 py-2.5 bg-white/5 backdrop-blur-sm border border-white/10 rounded-full mb-8 reveal-on-scroll">
                <svg class="w-5 h-5 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                </svg>
                <span class="text-sm font-medium text-white/90 tracking-wide">Strukturiert & Transparent</span>
            </div>

            <h1 class="font-display text-5xl md:text-6xl lg:text-7xl text-white mb-6 reveal-on-scroll" style="word-spacing: 0.3em;">
                SO ARBEITEN
                <span class="block bg-gradient-to-r from-primary-400 via-primary-500 to-accent-500 bg-clip-text text-transparent">WIR</span>
            </h1>

            <p class="text-xl text-white/70 max-w-2xl mx-auto reveal-on-scroll">
                Von der ersten Anfrage bis zur erfolgreichen Projektübergabe - erleben Sie unseren bewährten Arbeitsprozess
            </p>
        </div>
    </div>
</section>

<!-- Timeline Section -->
<section class="py-24 md:py-32 bg-dark-800 relative overflow-hidden">
    <!-- Background decorations -->
    <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-primary-500/30 to-transparent"></div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative">
        <!-- Section Header -->
        <div class="text-center max-w-3xl mx-auto mb-20 reveal-on-scroll">
            <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary-500/10 border border-primary-500/20 rounded-full mb-6">
                <span class="text-primary-500 text-sm font-semibold tracking-wide uppercase">Unser Prozess</span>
            </div>
            <h2 class="font-display text-4xl md:text-5xl text-white mb-6 tracking-wide">
                IN 6 SCHRITTEN ZUM<br>
                <span class="text-primary-500">ERFOLGREICHEN PROJEKT</span>
            </h2>
            <p class="text-lg text-white/70">
                Ein strukturierter Ablauf für maximale Transparenz und beste Ergebnisse
            </p>
        </div>

        <!-- Timeline -->
        <div class="relative max-w-5xl mx-auto">
            <!-- Timeline Line -->
            <div class="timeline-line hidden md:block"></div>
            <div class="timeline-line-progress hidden md:block" id="timelineProgress"></div>

            <!-- Step 1 -->
            <div class="timeline-step relative mb-16 md:mb-24 reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <!-- Left Content (Desktop) -->
                    <div class="hidden md:block w-[calc(50%-60px)] text-right">
                        <div class="timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500">
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">ERSTBERATUNG</h3>
                            <p class="text-white/70 leading-relaxed mb-4">
                                Sie kontaktieren uns per Telefon, E-Mail oder über unser Kontaktformular.
                                Wir besprechen Ihre Anforderungen und terminieren einen Vor-Ort-Termin.
                            </p>
                            <button onclick="openProjectModal()" class="inline-flex items-center gap-2 px-4 py-2 bg-primary-500 text-white text-sm font-semibold rounded-lg hover:bg-primary-600 transition-all">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                </svg>
                                Jetzt Projekt anfragen
                            </button>
                        </div>
                    </div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-dark-700 rounded-full flex items-center justify-center border-4 border-primary-500/30">
                            <div class="step-icon w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">01</span>
                    </div>

                    <!-- Right Content (Desktop) / Mobile Content -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="md:hidden timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5">
                            <span class="inline-block text-primary-500 font-display text-lg mb-2">01</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">ERSTBERATUNG</h3>
                            <p class="text-white/70 leading-relaxed mb-4">
                                Sie kontaktieren uns per Telefon, E-Mail oder über unser Kontaktformular.
                                Wir besprechen Ihre Anforderungen und terminieren einen Vor-Ort-Termin.
                            </p>
                            <button onclick="openProjectModal()" class="inline-flex items-center gap-2 px-4 py-2 bg-primary-500 text-white text-sm font-semibold rounded-lg hover:bg-primary-600 transition-all">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                </svg>
                                Jetzt Projekt anfragen
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="timeline-step relative mb-16 md:mb-24 reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <!-- Left Side Empty -->
                    <div class="hidden md:block w-[calc(50%-60px)]"></div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-dark-700 rounded-full flex items-center justify-center border-4 border-primary-500/30">
                            <div class="step-icon w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">02</span>
                    </div>

                    <!-- Right Content -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500">
                            <span class="md:hidden inline-block text-primary-500 font-display text-lg mb-2">02</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">BESICHTIGUNG & AUFMASS</h3>
                            <p class="text-white/70 leading-relaxed">
                                Wir kommen zu Ihnen vor Ort, nehmen alle relevanten Maße auf
                                und erfassen die baulichen Gegebenheiten für eine präzise Planung.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="timeline-step relative mb-16 md:mb-24 reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <!-- Left Content -->
                    <div class="hidden md:block w-[calc(50%-60px)] text-right">
                        <div class="timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500">
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">KOSTENVORANSCHLAG</h3>
                            <p class="text-white/70 leading-relaxed">
                                Basierend auf der Besichtigung erstellen wir ein detailliertes,
                                transparenten Kostenvoranschlag mit allen Leistungen und Kosten.
                            </p>
                        </div>
                    </div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-dark-700 rounded-full flex items-center justify-center border-4 border-primary-500/30">
                            <div class="step-icon w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">03</span>
                    </div>

                    <!-- Right Side Empty / Mobile -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="md:hidden timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5">
                            <span class="inline-block text-primary-500 font-display text-lg mb-2">03</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">KOSTENVORANSCHLAG</h3>
                            <p class="text-white/70 leading-relaxed">
                                Basierend auf der Besichtigung erstellen wir ein detailliertes,
                                transparenten Kostenvoranschlag mit allen Leistungen und Kosten.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="timeline-step relative mb-16 md:mb-24 reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <div class="hidden md:block w-[calc(50%-60px)]"></div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-dark-700 rounded-full flex items-center justify-center border-4 border-primary-500/30">
                            <div class="step-icon w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">04</span>
                    </div>

                    <!-- Right Content -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500">
                            <span class="md:hidden inline-block text-primary-500 font-display text-lg mb-2">04</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">TERMINPLANUNG</h3>
                            <p class="text-white/70 leading-relaxed">
                                Nach Auftragserteilung stimmen wir gemeinsam den optimalen
                                Ausführungszeitraum ab und erstellen einen detaillierten Zeitplan.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5 -->
            <div class="timeline-step relative mb-16 md:mb-24 reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <!-- Left Content -->
                    <div class="hidden md:block w-[calc(50%-60px)] text-right">
                        <div class="timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500">
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">AUSFÜHRUNG</h3>
                            <p class="text-white/70 leading-relaxed">
                                Unsere qualifizierten Fachkräfte führen alle Arbeiten termingerecht,
                                sauber und nach höchsten Qualitätsstandards aus.
                            </p>
                        </div>
                    </div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-dark-700 rounded-full flex items-center justify-center border-4 border-primary-500/30">
                            <div class="step-icon w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">05</span>
                    </div>

                    <!-- Mobile Content -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="md:hidden timeline-step-content bg-dark-700/50 rounded-2xl p-8 border border-white/5">
                            <span class="inline-block text-primary-500 font-display text-lg mb-2">05</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">AUSFÜHRUNG</h3>
                            <p class="text-white/70 leading-relaxed">
                                Unsere qualifizierten Fachkräfte führen alle Arbeiten termingerecht,
                                sauber und nach höchsten Qualitätsstandards aus.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 6 -->
            <div class="timeline-step relative reveal-on-scroll">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    <div class="hidden md:block w-[calc(50%-60px)]"></div>

                    <!-- Step Number -->
                    <div class="relative z-10 flex-shrink-0">
                        <div class="timeline-step-pulse hidden md:block"></div>
                        <div class="timeline-step-number w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center shadow-lg shadow-primary-500/30">
                            <div class="step-icon">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                        </div>
                        <span class="hidden md:block absolute -bottom-8 left-1/2 -translate-x-1/2 text-primary-500 font-display text-lg">06</span>
                    </div>

                    <!-- Right Content -->
                    <div class="md:w-[calc(50%-60px)]">
                        <div class="timeline-step-content bg-gradient-to-br from-primary-500/10 to-accent-500/10 rounded-2xl p-8 border border-primary-500/30">
                            <span class="md:hidden inline-block text-primary-500 font-display text-lg mb-2">06</span>
                            <h3 class="font-display text-2xl text-white mb-4 tracking-wide">ABNAHME & ÜBERGABE</h3>
                            <p class="text-white/70 leading-relaxed">
                                Nach Fertigstellung erfolgt eine gemeinsame Abnahme.
                                Wir übergeben Ihnen das fertige Projekt mit allen relevanten Dokumenten.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section class="py-24 md:py-32 bg-dark-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center max-w-3xl mx-auto mb-16 reveal-on-scroll">
            <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary-500/10 border border-primary-500/20 rounded-full mb-6">
                <span class="text-primary-500 text-sm font-semibold tracking-wide uppercase">Ihre Vorteile</span>
            </div>
            <h2 class="font-display text-4xl md:text-5xl text-white mb-6 tracking-wide">
                WARUM KUNDEN<br>
                <span class="text-primary-500">UNS VERTRAUEN</span>
            </h2>
        </div>

        <!-- Benefits Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 reveal-stagger">
            <!-- Benefit 1 -->
            <div class="group bg-dark-800/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500 text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-primary-500/30 group-hover:scale-110 transition-transform">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="font-display text-xl text-white mb-3 tracking-wide">TRANSPARENZ</h3>
                <p class="text-white/60 text-sm">Klare Kommunikation und nachvollziehbare Preise</p>
            </div>

            <!-- Benefit 2 -->
            <div class="group bg-dark-800/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500 text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-primary-500/30 group-hover:scale-110 transition-transform">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="font-display text-xl text-white mb-3 tracking-wide">TERMINTREUE</h3>
                <p class="text-white/60 text-sm">Vereinbarte Deadlines werden zuverlässig eingehalten</p>
            </div>

            <!-- Benefit 3 -->
            <div class="group bg-dark-800/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500 text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-primary-500/30 group-hover:scale-110 transition-transform">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                    </svg>
                </div>
                <h3 class="font-display text-xl text-white mb-3 tracking-wide">QUALITÄT</h3>
                <p class="text-white/60 text-sm">Hochwertige Materialien und fachgerechte Ausführung</p>
            </div>

            <!-- Benefit 4 -->
            <div class="group bg-dark-800/50 rounded-2xl p-8 border border-white/5 hover:border-primary-500/30 transition-all duration-500 text-center">
                <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-primary-500/30 group-hover:scale-110 transition-transform">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                </div>
                <h3 class="font-display text-xl text-white mb-3 tracking-wide">ERREICHBAR</h3>
                <p class="text-white/60 text-sm">Ein fester Ansprechpartner für Ihr gesamtes Projekt</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-24 bg-gradient-to-br from-primary-600 to-primary-700 relative overflow-hidden">
    <!-- Decorations -->
    <div class="absolute inset-0 opacity-10">
        <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%23ffffff&quot; fill-opacity=&quot;1&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
    </div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="max-w-4xl mx-auto text-center reveal-on-scroll">
            <h2 class="font-display text-4xl md:text-5xl lg:text-6xl text-white mb-6 tracking-wide">
                BEREIT FÜR IHR<br>NÄCHSTES PROJEKT?
            </h2>
            <p class="text-xl text-white/90 mb-10 max-w-2xl mx-auto">
                Lassen Sie uns gemeinsam Ihr Vorhaben besprechen.
                Kontaktieren Sie uns für eine unverbindliche Erstberatung.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="openProjectModal()" class="px-8 py-4 bg-white text-primary-600 font-semibold rounded hover:bg-gray-100 transition-all duration-300 hover:shadow-xl flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Projekt anfragen
                </button>
                <a href="{{ url_for('index') }}" class="px-8 py-4 border-2 border-white/30 text-white font-semibold rounded hover:bg-white/10 transition-all duration-300">
                    Zurück zur Startseite
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Projektanfrage Modal -->
<div id="projectModal" class="hidden" style="position: fixed; inset: 0; z-index: 9999; overflow-y: auto;">
    <!-- Backdrop -->
    <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.85);" onclick="closeProjectModal()"></div>

    <!-- Modal Content -->
    <div style="position: relative; z-index: 10; display: flex; justify-content: center; padding: 2rem; min-height: 100vh;">
        <div style="background: #1a1a1a; border-radius: 1rem; width: 100%; max-width: 48rem; border: 1px solid rgba(255,255,255,0.1); margin: 2rem 0; height: fit-content;">
            <!-- Modal Header -->
            <div style="padding: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h3 class="font-display" style="font-size: 1.5rem; color: white; letter-spacing: 0.05em;">PROJEKTANFRAGE</h3>
                    <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-top: 0.25rem;">Beschreiben Sie Ihr Vorhaben</p>
                </div>
                <button onclick="closeProjectModal()" style="width: 2.5rem; height: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(255,255,255,0.05); border: none; cursor: pointer;">
                    <svg style="width: 1.25rem; height: 1.25rem; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <form id="projectForm" style="padding: 2rem;" action="/submit-project" method="POST" enctype="multipart/form-data">
                <!-- Step Indicator -->
                <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 2rem;">
                    <div class="step-indicator active" style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 2rem; height: 2rem; border-radius: 50%; background: #E85A1E; color: white; display: flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 600;">1</span>
                        <span style="color: white; font-size: 0.875rem;">Kontakt</span>
                    </div>
                    <div style="width: 2rem; height: 1px; background: rgba(255,255,255,0.2);"></div>
                    <div class="step-indicator" data-step="2" style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 2rem; height: 2rem; border-radius: 50%; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.5); display: flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 600;">2</span>
                        <span style="color: rgba(255,255,255,0.5); font-size: 0.875rem;">Projekt</span>
                    </div>
                    <div style="width: 2rem; height: 1px; background: rgba(255,255,255,0.2);"></div>
                    <div class="step-indicator" data-step="3" style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 2rem; height: 2rem; border-radius: 50%; background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.5); display: flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 600;">3</span>
                        <span style="color: rgba(255,255,255,0.5); font-size: 0.875rem;">Bilder</span>
                    </div>
                </div>

                <!-- Step 1: Kontaktdaten -->
                <div id="step1" class="form-step active">
                    <h4 class="font-display" style="font-size: 1.25rem; color: white; letter-spacing: 0.05em; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                        IHRE KONTAKTDATEN
                    </h4>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div>
                            <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Name *</label>
                            <input type="text" name="name" required
                                   style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;"
                                   placeholder="Ihr vollständiger Name">
                        </div>
                        <div>
                            <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Telefon *</label>
                            <input type="tel" name="phone" required
                                   style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;"
                                   placeholder="+49 123 456789">
                        </div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">E-Mail *</label>
                        <input type="email" name="email" required
                               style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;"
                               placeholder="ihre@email.de">
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Adresse / Projektstandort</label>
                        <input type="text" name="address"
                               style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;"
                               placeholder="Straße, PLZ, Ort">
                    </div>

                    <div style="display: flex; justify-content: flex-end; padding-top: 1rem;">
                        <button type="button" onclick="nextStep(2)" style="padding: 0.75rem 1.5rem; background: #E85A1E; color: white; font-weight: 600; border-radius: 0.5rem; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            Weiter
                            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Projektdetails -->
                <div id="step2" class="form-step hidden">
                    <h4 class="font-display" style="font-size: 1.25rem; color: white; letter-spacing: 0.05em; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                        PROJEKTDETAILS
                    </h4>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.75rem;">Projektart *</label>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="tueren" style="display: none;" required>
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Türen & Tore</span>
                                </div>
                            </label>
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="trockenbau" style="display: none;">
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Trockenbau</span>
                                </div>
                            </label>
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="fussboden" style="display: none;">
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Fußboden</span>
                                </div>
                            </label>
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="wartung" style="display: none;">
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Wartung</span>
                                </div>
                            </label>
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="brandschutz" style="display: none;">
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Brandschutz</span>
                                </div>
                            </label>
                            <label class="project-type-option" style="cursor: pointer;">
                                <input type="radio" name="project_type" value="sonstiges" style="display: none;">
                                <div style="padding: 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; text-align: center;">
                                    <svg style="width: 2rem; height: 2rem; margin: 0 auto 0.5rem; color: rgba(255,255,255,0.6);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">Sonstiges</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div>
                            <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Gewünschter Zeitraum</label>
                            <select name="timeframe" style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;">
                                <option value="">Bitte wählen</option>
                                <option value="sofort">So schnell wie möglich</option>
                                <option value="1-2wochen">In 1-2 Wochen</option>
                                <option value="1monat">Innerhalb eines Monats</option>
                                <option value="3monate">In den nächsten 3 Monaten</option>
                                <option value="flexibel">Flexibel / Nach Absprache</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Geschätzte Fläche / Umfang</label>
                            <input type="text" name="scope"
                                   style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem;"
                                   placeholder="z.B. 50 m², 3 Türen, etc.">
                        </div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Projektbeschreibung *</label>
                        <textarea name="message" rows="4" required
                                  style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem; resize: none;"
                                  placeholder="Beschreiben Sie Ihr Projekt so detailliert wie möglich..."></textarea>
                    </div>

                    <div style="display: flex; justify-content: space-between; padding-top: 1rem;">
                        <button type="button" onclick="prevStep(1)" style="padding: 0.75rem 1.5rem; background: transparent; border: 1px solid rgba(255,255,255,0.2); color: white; font-weight: 600; border-radius: 0.5rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                            Zurück
                        </button>
                        <button type="button" onclick="nextStep(3)" style="padding: 0.75rem 1.5rem; background: #E85A1E; color: white; font-weight: 600; border-radius: 0.5rem; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            Weiter
                            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Bilder -->
                <div id="step3" class="form-step hidden">
                    <h4 class="font-display" style="font-size: 1.25rem; color: white; letter-spacing: 0.05em; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                        BILDER HOCHLADEN (OPTIONAL)
                    </h4>

                    <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-bottom: 1.5rem;">
                        Laden Sie Fotos Ihres Projekts hoch, um uns einen besseren Eindruck zu geben.
                        Akzeptierte Formate: JPG, PNG (max. 10 MB pro Bild)
                    </p>

                    <!-- File Upload Area -->
                    <div id="dropZone" style="border: 2px dashed rgba(255,255,255,0.2); border-radius: 0.75rem; padding: 2rem; text-align: center; cursor: pointer; margin-bottom: 1.5rem;">
                        <input type="file" id="fileInput" name="images" multiple accept="image/*" style="display: none;">
                        <div>
                            <div style="width: 4rem; height: 4rem; margin: 0 auto 1rem; background: linear-gradient(135deg, #E85A1E, #F5A623); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg style="width: 1.5rem; height: 1.5rem; color: white; display: block;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
                                </svg>
                            </div>
                            <p style="color: white; font-weight: 500;">Bilder hier ablegen</p>
                            <p style="color: rgba(255,255,255,0.5); font-size: 0.875rem;">oder klicken zum Auswählen</p>
                        </div>
                    </div>

                    <!-- Preview Area -->
                    <div id="previewArea" class="hidden" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;"></div>

                    <!-- Additional Notes -->
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">Zusätzliche Hinweise</label>
                        <textarea name="notes" rows="3"
                                  style="width: 100%; padding: 0.75rem 1rem; background: rgba(30,30,30,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.5rem; color: white; font-size: 1rem; resize: none;"
                                  placeholder="Gibt es etwas, das wir sonst noch wissen sollten?"></textarea>
                    </div>

                    <!-- Privacy Checkbox -->
                    <div style="display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 1.5rem;">
                        <input type="checkbox" id="privacy" name="privacy" required style="margin-top: 0.25rem; width: 1.25rem; height: 1.25rem; accent-color: #E85A1E;">
                        <label for="privacy" style="color: rgba(255,255,255,0.7); font-size: 0.875rem;">
                            Ich habe die <a href="{{ url_for('datenschutz') }}" style="color: #E85A1E;" target="_blank">Datenschutzerklärung</a> gelesen und stimme der Verarbeitung meiner Daten zu. *
                        </label>
                    </div>

                    <div style="display: flex; justify-content: space-between; padding-top: 1rem;">
                        <button type="button" onclick="prevStep(2)" style="padding: 0.75rem 1.5rem; background: transparent; border: 1px solid rgba(255,255,255,0.2); color: white; font-weight: 600; border-radius: 0.5rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                            Zurück
                        </button>
                        <button type="submit" style="padding: 0.75rem 2rem; background: linear-gradient(to right, #E85A1E, #F5A623); color: white; font-weight: 600; border-radius: 0.5rem; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                            </svg>
                            Anfrage absenden
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Timeline progress animation
function updateTimelineProgress() {
    const timeline = document.querySelector('.timeline-line');
    const progress = document.getElementById('timelineProgress');

    if (!timeline || !progress) return;

    const rect = timeline.getBoundingClientRect();
    const timelineTop = rect.top;
    const timelineHeight = rect.height;
    const windowHeight = window.innerHeight;

    // Calculate how much of the timeline is visible/scrolled past
    const scrolledPast = Math.max(0, windowHeight / 2 - timelineTop);
    const progressPercent = Math.min(100, (scrolledPast / timelineHeight) * 100);

    progress.style.height = progressPercent + '%';
}

window.addEventListener('scroll', updateTimelineProgress, { passive: true });
window.addEventListener('resize', updateTimelineProgress);
updateTimelineProgress();

// =====================
// Project Modal Functions
// =====================

let currentStep = 1;
let uploadedFiles = [];

function openProjectModal() {
    const modal = document.getElementById('projectModal');
    modal.classList.remove('hidden');
    document.body.classList.add('overflow-hidden');

    // Reset to step 1
    currentStep = 1;
    updateStepDisplay();

    // Scroll modal to top
    modal.scrollTop = 0;
}

function closeProjectModal() {
    const modal = document.getElementById('projectModal');
    modal.classList.add('hidden');
    document.body.classList.remove('overflow-hidden');
}

// Close modal on Escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeProjectModal();
    }
});

function nextStep(step) {
    // Validate current step before proceeding
    if (!validateStep(currentStep)) return;

    currentStep = step;
    updateStepDisplay();
}

function prevStep(step) {
    currentStep = step;
    updateStepDisplay();
}

function validateStep(step) {
    const form = document.getElementById('projectForm');

    if (step === 1) {
        const name = form.querySelector('input[name="name"]');
        const phone = form.querySelector('input[name="phone"]');
        const email = form.querySelector('input[name="email"]');

        if (!name.value.trim()) {
            name.focus();
            name.style.borderColor = '#ef4444';
            return false;
        }
        name.style.borderColor = 'rgba(255,255,255,0.1)';

        if (!phone.value.trim()) {
            phone.focus();
            phone.style.borderColor = '#ef4444';
            return false;
        }
        phone.style.borderColor = 'rgba(255,255,255,0.1)';

        if (!email.value.trim() || !email.validity.valid) {
            email.focus();
            email.style.borderColor = '#ef4444';
            return false;
        }
        email.style.borderColor = 'rgba(255,255,255,0.1)';
    }

    if (step === 2) {
        const projectType = form.querySelector('input[name="project_type"]:checked');
        const message = form.querySelector('textarea[name="message"]');

        if (!projectType) {
            alert('Bitte wählen Sie eine Projektart aus.');
            return false;
        }

        if (!message.value.trim()) {
            message.focus();
            message.classList.add('border-red-500');
            return false;
        }
        message.classList.remove('border-red-500');
    }

    return true;
}

function updateStepDisplay() {
    // Hide all steps - remove active class
    document.querySelectorAll('.form-step').forEach(step => {
        step.classList.remove('active');
    });

    // Show current step - add active class
    document.getElementById('step' + currentStep).classList.add('active');

    // Update step indicators with inline styles
    document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
        const stepNum = index + 1;
        const circle = indicator.querySelector('span:first-child');
        const text = indicator.querySelector('span:last-child');

        if (stepNum <= currentStep) {
            circle.style.background = '#E85A1E';
            circle.style.color = 'white';
            if (text) {
                text.style.color = 'white';
            }
        } else {
            circle.style.background = 'rgba(255,255,255,0.1)';
            circle.style.color = 'rgba(255,255,255,0.5)';
            if (text) {
                text.style.color = 'rgba(255,255,255,0.5)';
            }
        }
    });

    // Scroll modal to top
    const modalContent = document.querySelector('#projectModal .overflow-y-auto');
    if (modalContent) {
        modalContent.scrollTop = 0;
    }
}

// Project type selection styling
document.querySelectorAll('.project-type-option input').forEach(input => {
    input.addEventListener('change', function() {
        // Remove selected state from all
        document.querySelectorAll('.project-type-option div').forEach(div => {
            div.style.borderColor = 'rgba(255,255,255,0.1)';
            div.style.background = 'rgba(30,30,30,0.8)';
            const svg = div.querySelector('svg');
            if (svg) svg.style.color = 'rgba(255,255,255,0.6)';
        });

        // Add selected state to current
        if (this.checked) {
            const div = this.nextElementSibling;
            div.style.borderColor = '#E85A1E';
            div.style.background = 'rgba(232,90,30,0.15)';
            const svg = div.querySelector('svg');
            if (svg) svg.style.color = '#E85A1E';
        }
    });
});

// File upload handling
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const previewArea = document.getElementById('previewArea');

if (dropZone && fileInput) {
    dropZone.addEventListener('click', () => fileInput.click());

    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('border-primary-500', 'bg-primary-500/5');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('border-primary-500', 'bg-primary-500/5');
    });

    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('border-primary-500', 'bg-primary-500/5');
        handleFiles(e.dataTransfer.files);
    });

    fileInput.addEventListener('change', (e) => {
        handleFiles(e.target.files);
    });
}

function handleFiles(files) {
    Array.from(files).forEach(file => {
        if (!file.type.startsWith('image/')) return;
        if (file.size > 10 * 1024 * 1024) {
            alert(`${file.name} ist zu groß. Maximale Größe: 10 MB`);
            return;
        }

        uploadedFiles.push(file);

        const reader = new FileReader();
        reader.onload = (e) => {
            addPreview(e.target.result, file.name, uploadedFiles.length - 1);
        };
        reader.readAsDataURL(file);
    });
}

function addPreview(src, name, index) {
    previewArea.classList.remove('hidden');

    const preview = document.createElement('div');
    preview.className = 'relative group';
    preview.innerHTML = `
        <img src="${src}" alt="${name}" class="w-full h-24 object-cover rounded-lg">
        <button type="button" onclick="removeFile(${index})" class="absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
        <p class="text-white/50 text-xs mt-1 truncate">${name}</p>
    `;
    previewArea.appendChild(preview);
}

function removeFile(index) {
    uploadedFiles.splice(index, 1);
    updatePreviews();
}

function updatePreviews() {
    previewArea.innerHTML = '';
    if (uploadedFiles.length === 0) {
        previewArea.classList.add('hidden');
        return;
    }

    uploadedFiles.forEach((file, index) => {
        const reader = new FileReader();
        reader.onload = (e) => {
            addPreview(e.target.result, file.name, index);
        };
        reader.readAsDataURL(file);
    });
}

// Form submission handling
const projectForm = document.getElementById('projectForm');
if (projectForm) {
    projectForm.addEventListener('submit', function(e) {
        e.preventDefault();

        // Validate step 3
        const privacy = this.querySelector('#privacy');
        if (!privacy.checked) {
            showFormMessage('error', 'Bitte stimmen Sie der Datenschutzerklärung zu.');
            return;
        }

        // Create FormData
        const formData = new FormData(this);

        // Add uploaded files
        uploadedFiles.forEach((file, index) => {
            formData.append('images[]', file);
        });

        // Show loading state
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalBtnText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<svg style="width: 1.25rem; height: 1.25rem; animation: spin 1s linear infinite;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Wird gesendet...';
        submitBtn.disabled = true;

        // Submit form
        fetch(this.action, {
            method: 'POST',
            body: formData
        })
        .then(response => {
            if (response.ok) {
                // Show success message in modal
                showSuccessScreen();

                // Reset form after delay
                setTimeout(() => {
                    this.reset();
                    uploadedFiles = [];
                    previewArea.innerHTML = '';
                    previewArea.classList.add('hidden');
                    currentStep = 1;
                    updateStepDisplay();
                    submitBtn.innerHTML = originalBtnText;
                    submitBtn.disabled = false;
                }, 500);
            } else {
                throw new Error('Submission failed');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showFormMessage('error', 'Es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut oder kontaktieren Sie uns direkt.');
            submitBtn.innerHTML = originalBtnText;
            submitBtn.disabled = false;
        });
    });
}

// Show success screen in modal
function showSuccessScreen() {
    const form = document.getElementById('projectForm');
    form.innerHTML = `
        <div style="text-align: center; padding: 3rem 1rem;">
            <div style="width: 5rem; height: 5rem; margin: 0 auto 1.5rem; background: linear-gradient(135deg, #E85A1E, #F5A623); border-radius: 50%; display: flex; align-items: center; justify-content: center; animation: scaleIn 0.5s ease;">
                <svg style="width: 2.5rem; height: 2.5rem; color: white;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="font-display" style="font-size: 1.75rem; color: white; margin-bottom: 1rem; letter-spacing: 0.05em;">ANFRAGE GESENDET!</h3>
            <p style="color: rgba(255,255,255,0.7); font-size: 1.1rem; max-width: 400px; margin: 0 auto 2rem;">
                Vielen Dank für Ihre Anfrage!<br>Wir werden uns schnellstmöglich bei Ihnen melden.
            </p>
            <button type="button" onclick="closeProjectModal(); resetProjectForm();" style="padding: 0.875rem 2rem; background: #E85A1E; color: white; font-weight: 600; border-radius: 0.5rem; border: none; cursor: pointer; font-size: 1rem;">
                Schließen
            </button>
        </div>
    `;
}

// Reset project form to original state
function resetProjectForm() {
    setTimeout(() => {
        location.reload();
    }, 100);
}

// Show inline form message
function showFormMessage(type, message) {
    // Remove existing messages
    const existing = document.querySelector('.form-message');
    if (existing) existing.remove();

    const msgDiv = document.createElement('div');
    msgDiv.className = 'form-message';
    msgDiv.style.cssText = `
        padding: 1rem 1.5rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        animation: fadeIn 0.3s ease;
        ${type === 'error'
            ? 'background: rgba(220,38,38,0.15); border: 1px solid rgba(220,38,38,0.3); color: #fca5a5;'
            : 'background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.3); color: #86efac;'}
    `;
    msgDiv.innerHTML = `
        <svg style="width: 1.25rem; height: 1.25rem; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            ${type === 'error'
                ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>'
                : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>'}
        </svg>
        <span>${message}</span>
    `;

    const activeStep = document.querySelector('.form-step.active');
    if (activeStep) {
        activeStep.insertBefore(msgDiv, activeStep.firstChild);
    }

    // Auto remove after 5 seconds
    setTimeout(() => {
        msgDiv.style.animation = 'fadeOut 0.3s ease';
        setTimeout(() => msgDiv.remove(), 300);
    }, 5000);
}
</script>
{% endblock %}
